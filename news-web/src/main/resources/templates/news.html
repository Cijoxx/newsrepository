<!DOCTYPE html>
<html lang="zxx" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" >
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta content="" name="description">
    <meta content="" name="keywords">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="HandheldFriendly" content="true">
    <meta content="telephone=no" name="format-detection">
    <script src="news/js/jquery.min.js"></script>
    <script src="news/js/bootstrap.min.js"></script>
    <script src="news/js/main.js"></script>
    <!-- favicon -->
    <link rel="shortcut icon" type="news/image/png" href="favicon.png" />
    <!--[if (gt IE 9)|!(IE)]><!-->
    <!-- custom CSS -->
    <link href="news/css/main.css" rel="stylesheet" type="text/css" />
    <!-- END custom CSS -->
    <!--<![endif]-->
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <title>新闻详情</title>
</head>
<body>
<!-- Header -->
<header id="header" class="header">
    <div class="header__top">
        <div class="container">
            <div class="row">
                <div class="col-sm-3">
                    <div class="wrap-logo">
                        <a href="jumpIndex" class="logo"></a>
                    </div>
                </div>
                <div class="col-sm-offset-2 col-md-offset-5 col-sm-6 col-md-4 hidden-xs">
                    <div class="col-xs-4 col-sm-5">
                        <div class="weather">
                            <div class="weather__temperature">
                                <a th:if="${session.userEntity}!=null">
                                    <img id="imgPhoto2" style="position: absolute;top: 20px; right: 10px;border-radius: 25px;border: none;" width="60px" height="60px"img th:src="${session.userEntity.userphoto}"> </a>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-6 col-sm-7">
                        <div class="weather__city" >
                            <h2><a th:if="${session.userEntity}==null" th:href="jumpLogin">登录</a></h2>
                            <h2><a th:if="${session.userEntity}!=null" th:href="jumpuserinfo" th:text="${session.userEntity.username}"></a></h2>
                            <h2><a th:href="logout">注销</a> </h2>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="wsmenucontent overlapblackbg"></div>
    <div class="wsmenuexpandermain slideRight">
        <a id="navToggle" class="animated-arrow slideLeft">
            <span></span>
        </a>
    </div>
    <div class="header_down">
        <div class="container">
            <div class="wrapper clearfix bigmegamenu">
                <!--Main Menu HTML Code-->
                <nav class="wsmenu slideLeft clearfix">
                    <ul class="mobile-sub wsmenu-list">
                        <li class="visible-xs">
                            <form action="searchNews" method="post" class="navbar-form mob_search" role="search">
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Search">
                                </div>
                                <button type="submit" class="btn btn-search">
                                    <i class="icon-search"></i>
                                </button>
                            </form>
                        </li>
                        <li class="active">
                            <span class="wsmenu-click"></span>
                            <a th:href="@{'jumpIndex'}">首页</a>
                        </li>
                        <li>
                            <span class="wsmenu-click"></span>
                            <a th:href="@{'category?showtype=1'}">经济</a>
                        </li>
                        <li>
                            <span class="wsmenu-click"></span>
                            <a th:href="@{'category?showtype=2'}">政治</a>
                        </li>
                        <li>
                            <span class="wsmenu-click"></span>
                            <a th:href="@{'category?showtype=3'}">体育</a>
                        </li>
                        <li>
                            <span class="wsmenu-click"></span>
                            <a th:href="@{'category?showtype=4'}">军事</a>
                        </li>
                        <li>
                            <span class="wsmenu-click"></span>
                            <a th:href="@{'category?showtype=5'}">娱乐</a>
                        </li>
                        <!--<li>
                            <span class="wsmenu-click"></span>
                            <a href="">Other
                                <span class="arrow"></span>
                            </a>
                            <ul class="wsmenu-submenu">
                                <li>
                                    <a th:href="@{jump404}">404 page</a>
                                </li>
                                <li>
                                    <a th:href="category.html">Category page</a>
                                </li>
                                <li>
                                    <a th:href="news.html">News page</a>
                                </li>
                                <li>
                                    <a th:href="search-result.html">Search result</a>
                                </li>
                                <li>
                                    <a th:href="full-width.html">Full width</a>
                                </li>
                            </ul>
                        </li>-->
                        <li class="navbar-right hidden-xs">
                            <form action="searchNews" method="post" class="navbar-form " role="search">
                                <div class="form-group">
                                    <input type="text" name="showtitle" class="form-control" placeholder="Search">
                                </div>
                                <button type="submit" class="btn btn-search">
                                    <i class="icon-search"></i>
                                    <br>Search
                                </button>
                            </form>
                        </li>
                        <li>
                            <div class="visible-xs col-sm-offset-5 col-sm-4">
                                <div class="col-xs-4 col-sm-5">
                                    <div class="weather">
                                        <div class="weather__temperature">
                                            <a th:if="${session.userEntity}!=null">
                                                <img id="imgPhoto" style="position: absolute;top: 20px; right: 10px;border-radius: 25px;border: none;" width="60px" height="60px"img th:src="${session.userEntity.userphoto}"> </a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-6 col-sm-7">
                                    <div class="weather__city" >
                                        <h2><a th:if="${session.userEntity}==null" th:href="jumpLogin">登录</a></h2>
                                        <h2><a th:if="${session.userEntity}!=null" th:href="jumpuserinfo" th:text="${session.userEntity.username}"></a></h2>
                                        <h2><a th:href="logout">注销</a> </h2>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </nav>
                <!--Menu HTML Code-->
            </div>
        </div>
    </div>
</header>
<!-- END header -->
<!-- header slider -->
<div class="wrapper">
    <article class="container articles">
        <div class="row">
            <div class="col-sm-4 col-md-3 right_sidebar hidden-xs hidden-sm" data-spy="affix" data-offset-top="112" data-offset-bottom="80">
                <div class="news-tabs">
                    <p class="news-tabs__title h2">News feed</p>
                    <ul class="news-tabs__nav nav nav-tabs shadow_text" role="tablist">
                        <li th:each="lastNews,lastNewsStatus:${session.newestListOfCategory}" role="presentation" >
                            <a th:href="@{'jumpNews?showid='+${lastNews.showid}}" role="tab" >
                                <span th:text="${#dates.format(lastNews.showtime,'yyyy-MM-dd HH:mm:ss')}" class="time"></span>
                                <p th:text="${lastNews.showtitle}"></p>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-sm-12 col-md-9 p0 wrap-headline">
                <img src="news/img/content/article.jpg" alt="img" class="wrap-headline__img">
                <div class="headline clearfix">
                    <div class="headline__data">
                        <!-- <a th:href="@{'category?showtype='+${session.newsEntity.showtype}}"  class="headline__category headline__category_orange" th:if="${session.newsEntity.showtype}   == 1 ">经济</a>
                         <a th:href="@{'category?showtype='+${session.newsEntity.showtype}}"  class="headline__category headline__category_orange" th:if="${session.newsEntity.showtype}   == 2 ">政治</a>
                         <a th:href="@{'category?showtype='+${session.newsEntity.showtype}}"  class="headline__category headline__category_orange" th:if="${session.newsEntity.showtype}   == 3 ">体育</a>
                         <a th:href="@{'category?showtype='+${session.newsEntity.showtype}}"  class="headline__category headline__category_orange" th:if="${session.newsEntity.showtype}   == 4 ">军事</a>-->
                        <button  id="dianzan" class="headline__category headline__category_orange"  style="width: 60px">点赞</button>
                        <p th:text="${#dates.format(session.newsEntity.showtime,'yyyy-MM-dd HH:mm:ss')}" class="headline__category"></p>
                    </div>
                    <!--<div class="share">
                        <ul class="share__list">
                            <li class="share__row">
                                <a class="share__link share__link_bg-facebook" th:href="#">
                                    <i class="bg bg_facebook">&ensp;</i>
                                </a>
                                <span class="share__number">13</span>
                            </li>
                            <li class="share__row">
                                <a class="share__link share__link_bg-twitter" th:href="#">
                                    <i class="bg bg_twitter">&ensp;</i>
                                </a>
                                <span class="share__number">26</span>
                            </li>
                            <li class="share__row">
                                <a class="share__link share__link_bg-google" th:href="#">
                                    <i class="bg bg_google">&ensp;</i>
                                </a>
                                <span class="share__number">17</span>
                            </li>
                        </ul>
                    </div>-->
                </div>
            </div>
            <div id="newsblocks" class="col-sm-12 col-md-9 article_text">
                <script>
                    $("#newsblocks").load("newsblocks/news_1.html");
                </script>
            </div>
            <!--<div class="col-sm-12 col-md-9 tags">
                <p>Tags:</p>
                <ul>
                    <li>
                        <a th:href="#" title="World" class="font">World</a>
                    </li>
                    <li>
                        <a class="yellow font" th:href="#" title="Sport">Sport</a>
                    </li>
                    <li>
                        <a th:href="#" title="Cats" class="font">Cats</a>
                    </li>
                </ul>
            </div>-->
            <div th:if=" ${#lists.isEmpty(commentlist)} and ${#lists.size(commentlist)} eq 0 " class="col-sm-9 col-md-8 col-lg-6 comments">
                <p class="comments__title">暂无用户评论</p>
                <div class="comments__form">
                    <form action="addComment" method="POST">
                        <div class="form-group">
                            <!--<input type="text" style="width: 200px;" class="form-control" th:value="发表您的评论" readonly="true" />-->
                            &gt;&gt;<span style="width: 200px; font-size: larger; font-weight: bold ;font-style: italic" >发表您的评论</span>
                        </div>
                        <div class="form-group">
                            <textarea name="commentcontent" id="input" class="form-control" rows="7" required="required"></textarea>
                        </div>
                        <button id="submitcomment" type="button" class="btn btn-comment">send</button>
                    </form>
                </div>
            </div>
            <div th:if=" ${not #lists.isEmpty(commentlist)} and ${#lists.size(commentlist)} !=0 " class="col-sm-9 col-md-8 col-lg-6 comments">
                <p class="comments__title">用户评论</p>
                <div th:each="comment:${commentlist}" style="border: 2px solid #cccccc ;border-radius: 10px !important;" class="comments__media">
                    <div class="media-middle">
                        <img class="media-object" th:if="${comment.userEntity.userphoto} == null or ${comment.userEntity.userphoto} == '' " th:src="@{'news/img/content/comment.png'}"  alt="news\img\content\comment.png" />
                        <img class="media-object" th:if="${comment.userEntity.userphoto} != null and ${comment.userEntity.userphoto} != '' " th:src="@{${comment.userEntity.userphoto}}" alt="news\img\content\comment.png" />
                        <div class="comm_info">
                            <h4 th:text="${comment.userEntity.username}" class="media-heading"></h4>
                            <span th:text="${#dates.format(comment.commenttime,'yyyy-MM-dd HH:mm:ss')}" class="time"></span>
                        </div>
                    </div>
                    <p th:text="'评论内容:'+${comment.commentcontent}" class="media-body"></p>
                </div>

                <div class="comments__form">
                    <form action="addComment" method="POST">
                        <div class="form-group">
                            <!--<input type="text" style="width: 200px;" class="form-control" th:value="发表您的评论" readonly="true" />-->
                            &gt;&gt;<span style="width: 200px; font-size: larger; font-weight: bold ;font-style: italic" >发表您的评论</span>
                        </div>
                        <div class="form-group">
                            <textarea name="commentcontent" id="input" class="form-control" rows="7" required="required"></textarea>
                        </div>
                        <button id="submitcomment" type="button" class="btn btn-comment">send</button>
                    </form>
                </div>
            </div>
        </div>
    </article>
</div>
<!-- Footer -->
<footer class="footer slate_gray">
    <div class="container">
        <div class="row">
            <div class="col-sm-6">
                <p class="copyright">Copyright &copy; 2017.Company name All rights reserved.More Templates</p>
            </div>
            <div class="col-sm-6">
                <div class="social navbar-right">
                    <p class="social__text">We are in social networks</p>
                    <ul class="social__list">
                        <li class="social__item">
                            <a class="facebook" href="#">
                                <i class="icon-facebook"></i>
                            </a>
                        </li>
                        <li class="social__item">
                            <a class="twitter" href="#">
                                <i class="icon-twitter"></i>
                            </a>
                        </li>
                        <li class="social__item">
                            <a class="gplus" href="#">
                                <i class="icon-gplus"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</footer>
<!-- END Footer -->
<!-- All JavaScript libraries -->

</body>
<script th:inline="javascript">

    $("#input").bind('input propertychange',function(){
        var userEntity = [[${session.userEntity}]];
        var showid = [[${session.newsEntity.showid}]];
        if(null == userEntity){
            var isToLogin = confirm("登录之后方可评论，是否现在登录?")
            if(isToLogin){
                $("#input").val("");
                location.href= "jumpLogin?resultUrl=jumpNews"+location.search;
            }
        }
    });

    $("#submitcomment").click(function(){
        var content = $("#input").val();
        var showid = [[${session.newsEntity.showid}]];
        var userEntity = [[${session.userEntity}]];
        if(null == content || "" == content){
            alert("请先输入您的评论！");
        }else{
            $.ajax({
                url: "addComment",
                type: "post",
                data:{"commentcontent":content,"showid":showid,commenttime:new Date(),"userid":userEntity.userid},
                success: function(result){
                    if(result.result == "0000"){
                        alert(result.resultMsg);
                        window.location.href = result.resultUrl;
                    }else{
                        alert(result.resultMsg);
                    }
                }
            });
        }
    });
    //新闻点赞
    $(document).ready(function(){
        $('#dianzan').click(function() {
            var showid = [[${session.newsEntity.showid}]];
            $.ajax({
                url:"givegood",
                type:"post",
                data:{"showid":showid},
                success:function (reult){
                    alert("点赞成功")
                }
            });

        })
    })
</script>
</html>

